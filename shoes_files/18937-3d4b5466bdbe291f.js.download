"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18937],{3578:function(e,t,n){n.d(t,{e:function(){return i}});var r=n(59499),s=n(11987);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=function(e){var t=e.urlParams,n=void 0===t?{}:t,i=e.queryParams,o=void 0===i?{}:i,c="/bundle/".concat(n.filename),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);return{url:c,defaultParams:u,formattedUrl:(0,s.format)({pathname:c,query:u})}}},20559:function(e,t,n){n.d(t,{Oo:function(){return C},rB:function(){return _}});var r=n(59499),s=n(50029),a=n(87794),i=n.n(a),o=n(23204),c=n.n(o),u=n(44828),l=n(16257),p=n(39338),d=n(87883),f=n(55845),m=n(77573),v=n(60969),b=n(3674),y=n(58682),O=n(46601),w=n(52087),h=n(53558),g=n(60996);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t,n,r=e.asset;return(null===r||void 0===r||null===(t=r.metadata)||void 0===t||null===(n=t.cart)||void 0===n?void 0:n.sizes)||r.sizes},S=function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,s,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=t.asset)||void 0===r||null===(n=r.metadata)||void 0===n||!n.cart||r.metadata.cart.sizes){e.next=9;break}return s=(0,w.so)(r),a={id:r.id},s&&(a.channel=f.$S,a.content_provider=m._e),e.next=7,b.uS.get((0,u.om)({queryParams:a}).formattedUrl).then((function(e){var t=e.data;return(0,y.O)(t)}));case 7:return o=e.sent,e.abrupt("return",o.sizes);case 9:return e.abrupt("return",_({asset:r}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t,n,r,s,a=e.selectedAssetSize,i=e.asset,o=_({asset:i}),u=(0,w.EK)(i);if(!o&&null!==i&&void 0!==i&&null!==(t=i.metadata)&&void 0!==t&&null!==(n=t.cart)&&void 0!==n&&n.size&&i.metadata.cart.format)return{content_size:u?p.vD:i.metadata.cart.size,content_format:i.metadata.cart.format};var d,f=Object.values(o);return d=i.licenseAsJpeg||null!==(r=i.metadata)&&void 0!==r&&null!==(s=r.cart)&&void 0!==s&&s.licenseAsJpeg?f.find((function(e){return e.format===l._3})):h.Bg[a]?(0,O.AR)({sizes:f,compSizeImage:a}):(0,O.Nf)(f),{content_size:u?p.vD:h.nd[c()(d.name)].downloadName,content_format:d.format}},k=function(e){var t=e.map[e.licenseName];return t===p.T0?p.qY:t},x=function(e){var t=e.asset,n=e.licenseName,r=e.isVideoComp,s=e.selectedAssetSize,a=e.sizes,i=(0,w.EK)(t),o=(0,w.cL)(t),c=(0,w.$Q)({sizes:Object.values(a)});return!r&&c?k({map:h.Q1,licenseName:n}):r||n===v.f1||i||o?!s||i||o?(0,O.mF)(a):h.kR[s]:k({map:h.kR,licenseName:n})},A=function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,s,a,o,c,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.asset,r=t.licenseName,s=t.isVideoComp,a=t.selectedAssetSize,e.next=3,S({asset:n});case 3:return o=e.sent,c=x({asset:n,licenseName:r,isVideoComp:s,selectedAssetSize:a,sizes:o}),u=(0,w.EK)(n),l=Object.values(o).find((function(e){var t=e.resolution;return h.wb[null===t||void 0===t?void 0:t.toLowerCase()]===c})),e.abrupt("return",{content_size:u?p.vD:c,content_format:null===l||void 0===l?void 0:l.format});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,s,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.asset,r=t.licenseName,s=t.isVideoComp,a=t.selectedAssetSize,o=(0,g.qw)({asset:n}),(0,w.so)(n)&&(o=d.A7),e.t0=o,e.next=e.t0===d.pX||e.t0===d.A7?6:e.t0===d.j0?9:10;break;case 6:return e.next=8,A({asset:n,licenseName:r,isVideoComp:s,selectedAssetSize:a});case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",{content_size:p.Ng,content_format:d.j0});case 10:return e.abrupt("return",z({selectedAssetSize:a,asset:n}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,s,a,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.licenseName,r=t.selectedAssetSize,s=t.asset,a=t.isVideoComp,o=(0,g.qw)({asset:s}),c=s.id.toString(),e.t0=P,e.t1={content_id:c,content_type:(0,g.JD)({assetType:o,assetId:c})},e.next=7,N({asset:s,licenseName:n,isVideoComp:a,selectedAssetSize:r});case 7:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},18937:function(e,t,n){n.d(t,{A_:function(){return h},QH:function(){return P},VM:function(){return S},mJ:function(){return j},oe:function(){return z},uG:function(){return g}});var r=n(59499),s=n(90116),a=n(50029),i=n(87794),o=n.n(i),c=n(3578),u=n(44828),l=n(87883),p=n(60969),d=n(20559),f=n(46601),m=n(52087),v=n(48483),b=n(3674),y=n(1420);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.target,s=void 0===r?"_self":r,a=document.createElement("a");a.setAttribute("data-automation","FeatureDownload_utils_link"),a.style.display="none",a.href=e,a.target=s,a.download=n||e,document.body.appendChild(a),a.click(),(0,y.bK)()||document.body.removeChild(a)},g=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.downloadBundlePayload,r=(0,c.e)({urlParams:{filename:n.bundleFilename}}).formattedUrl,e.next=4,b.jl.post(r,n.content);case 4:return s=e.sent,a=s.data.public_url,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=e.licensedContent,n=e.supplementalUrlType,r=t[0],s=r.downloadUrl,a=r.supplementalUrls;if(null!==a&&void 0!==a&&a.length&&n){var i=(a.find((function(e){return e.type===n}))||{}).url;return void 0===i?s:i}return s},P=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,s,a,i,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.downloadPayload,r=t.supplementalUrlType,s=t.licenseeIdentifier,a=(0,u.f$)({urlParams:{licenseeIdentifier:s}}).formattedUrl,e.next=4,b.uS.post(a,n);case 4:return i=e.sent,c=i.data.meta.licensedContent,l=j({licensedContent:c,supplementalUrlType:r}),e.abrupt("return",{downloadUrl:l,licensedContent:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=e.existingAssetLicenses,n=e.contentType,r=e.licenseName,a=e.subscriptions;switch(n){case l.pX:var i,o,c=(0,v.eL)({existingAssetLicenses:t,subscriptions:[].concat((0,s.Z)(null!==(i=null===a||void 0===a?void 0:a.videoSubscriptions)&&void 0!==i?i:[]),(0,s.Z)(null!==(o=null===a||void 0===a?void 0:a.videoCompSubscriptions)&&void 0!==o?o:[])),licenseName:r});return(null===c||void 0===c?void 0:c.redeemableFor)||r;case l.j0:return r||p.zU;case l.pV:default:return r}},S=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,s,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,r=t.existingAssetLicenses,s=t.subscriptions,i=n.map(function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,f.SS)({asset:t}),e.t0=w,e.t1=w,e.t2={},e.next=6,(0,d.Oo)({asset:t,licenseName:t.licenseId});case 6:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={license_name:_({existingAssetLicenses:r,contentType:n,licenseName:t.licenseId,subscriptions:s}),show_modal:!0},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(i);case 4:return c=e.sent,e.abrupt("return",{required_cookies:"",content:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.id&&(e.title||e.description)&&e.type&&window.localStorage.setItem("sstk_ent_asset_preview",JSON.stringify({id:e.id,title:e.title||e.description,thumb:e.src||e.previewImageUrl||"",video:e.previewVideoUrls,url:e.link,type:(0,m.Tp)(e),isRex:e.isRexEditorial}))}}}]);
//# sourceMappingURL=18937-3d4b5466bdbe291f.js.map