"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73668],{73668:function(t,i,r){r.d(i,{Oy:function(){return T},DJ:function(){return P},kv:function(){return x},av:function(){return U},V9:function(){return A}});var e=r(90116),n=r(4730),o=r(59499),u=r(40821),a=r(44828),s=r(60969),c=r(24848),d=r(68733),p=r(54887),l=r(42926),v=r(24331),b=r(3674),f=r(58682),m=[{name:"years",unit:"Y"},{name:"months",unit:"M"},{name:"weeks",unit:"W"},{name:"days",unit:"D"}],S=new RegExp(["P"].concat((0,e.Z)(m.map((function(t){return function(t,i){return"((?<".concat(t,">-?\\d+)").concat(i,")?")}(t.name,t.unit)})))).join("")),g={years:function(t){var i=t.date,r=t.numberOfUnits;return i.setUTCFullYear(i.getUTCFullYear()-r),i},months:function(t){var i=t.date,r=t.numberOfUnits;return i.setUTCMonth(i.getUTCMonth()-r),i},weeks:function(t){var i=t.date,r=t.numberOfUnits;return i.setUTCDate(i.getUTCDate()-7*r),i},days:function(t){var i=t.date,r=t.numberOfUnits;return i.setUTCDate(i.getUTCDate()-r),i}},y=function(t){var i=t.date,r=t.duration;if(!i||!r)return null;try{var e=function(t){var i=S.exec(t);if(!i||!i.groups)return[];var r=i.groups;return m.reduce((function(t,i){var e=i.name,n=parseInt(r[e],10);return Number.isNaN(n)||t.push({name:e,value:n}),t}),[])}(r);return e.length?function(t){var i=t.date,r=t.parsedDuration,e=new Date(i);return r.reduce((function(t,i){var r=i.name,e=i.value;return g[r]({date:t,numberOfUnits:e})}),e).toISOString()}({date:i,parsedDuration:e}):null}catch(n){return null}},O=["isLoading"];function h(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,e)}return r}function w(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?h(Object(r),!0).forEach((function(i){(0,o.Z)(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}var C={editorialImageSubscriptions:s.T_,editorialImageCompSubscriptions:s.FO,editorialVideoSubscriptions:s.vW,editorialVideoCompSubscriptions:s.Uj,imageSubscriptions:s.xk,imageCompSubscriptions:[s.Ix],videoSubscriptions:s.S9,videoCompSubscriptions:[s.f1],videoPremierSubscriptions:s.Xm,videoPremierSmSubscriptions:s.JI,videoMediaSubscriptions:s.YV,videoPlatformSubscriptions:s.Lj,videoMediaSmSubscriptions:s.IS,videoPremierSelectSubscriptions:[s.Mb],videoMediaSelectSubscriptions:[s.G],musicSubscriptions:s.xq,musicCompSubscriptions:[s.zU]},D=function(t){var i,r,e,n,o,u=t.activeSubscriptions,a=t.subscriptions;if(!a)return{};var s=function(t){var i=t.subscriptionExpiration,r=t.duration;return y({date:i,duration:r})},c=function(t,i){var r=t.startDate;return i.startDate-r},d=u.map((function(t){return w(w({},t),{},{startDate:new Date(s(t))})})).sort(c)[0]||a.map((function(t){return w(w({},t),{},{startDate:new Date(s(t))})})).sort(c)[0];return d?{orderType:d.purchaseType,subscriptionId:d.id,subscriptionPermissionsExpireDate:d.subscriptionExpiration,autoRenewal:d.autoRenewal?String(d.autoRenewal):void 0,productTextId:null===d||void 0===d||null===(i=d.product)||void 0===i?void 0:i.name,productLengthTerm:d.duration,productDownloadAllotment:null!==(r=d.product)&&void 0!==r&&r.downloadCredits?String(null===(e=d.product)||void 0===e?void 0:e.downloadCredits):void 0,productReportingBusinessUnit:null===(n=d.product)||void 0===n?void 0:n.reportingBusinessUnit,productCategory:null===(o=d.product)||void 0===o?void 0:o.revenueModelDetail}:{}},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expiringAfter:null},i=t.expiringAfter,r=(0,p.j)(),e=r.data,n=(0,p.B)(),o=w({user:null===e||void 0===e?void 0:e.id,organization:null===e||void 0===e?void 0:e.organizationId},i&&{expiring_after:i}||{}),s=(0,a.ec)({queryParams:o}).formattedUrl;return(0,u.ZP)(n?s:null,(function(){return b.uS.get(s).then((function(t){return(0,f.O)(t.data)}))}),{dedupingInterval:c.no})},T=function(t){return t.reduce((function(t,i){return Object.keys(C).forEach((function(r){(function(t){var i=t.types,r=t.subscription;return i.includes(r.redeemableFor)})({types:C[r],subscription:i})&&t[r].push(w(w({},i),{},{type:r}))})),t}),{editorialImageSubscriptions:[],editorialImageCompSubscriptions:[],editorialVideoSubscriptions:[],editorialVideoCompSubscriptions:[],imageSubscriptions:[],imageCompSubscriptions:[],videoSubscriptions:[],videoCompSubscriptions:[],videoPremierSubscriptions:[],videoPremierSmSubscriptions:[],videoMediaSubscriptions:[],videoMediaSmSubscriptions:[],videoPlatformSubscriptions:[],videoPremierSelectSubscriptions:[],videoMediaSelectSubscriptions:[],musicSubscriptions:[],musicCompSubscriptions:[]})},U=function(){var t,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expiringAfter:null},o=r.expiringAfter,u=(0,p.B)(),a=(0,l.U)(),s=a.isLoading,c=(0,n.Z)(a,O),b=P({expiringAfter:o}),f=b.data,m=(0,v.w)(),S=m.data,g=(S=void 0===S?{}:S).data,y=void 0===g?{}:g,h=u&&void 0===f;if(s||h)return{data:void 0};var C=Array.isArray(f)?null===f||void 0===f?void 0:f.filter((function(t){return"active"===t.status})):[],U=Array.isArray(f)?D({activeSubscriptions:C,subscriptions:f}):{};if((0,d.Kc)({userCapabilities:c})){var x=(0,d.cT)({userCapabilities:c,subscriptions:f}),A=x.formattedSubscriptions,j=x.debitableSubscriptionInfo;t=A,i=j}var I=T(t||f||[]),E=y.attributes,M=(E=void 0===E?{}:E).lifetimeProducts,k=M||Array.isArray(f)&&f&&f.length||0;return{data:w(w({allSubscriptions:Object.values(I).reduce((function(t,i){return[].concat((0,e.Z)(t),(0,e.Z)(i))}),[]),activeSubscriptions:C,mostRecentSubscription:U,totalNumSubscriptionsAllTime:k,totalNumSubscriptionsActive:C&&C.length||0},I),i)}},x=function(){var t=function(){var t=(0,p.B)(),i=P({expiringAfter:"-P2Y"}).data;if(t&&!i)return{data:[],isLoading:!0};if(i&&i.length){var r=(new Date).getTime();return{data:i.filter((function(t){return new Date(t.subscriptionExpiration).getTime()<r||0===t.totalCreditsRemaining})),isLoading:!1}}return{data:[],isLoading:!1}}(),i=t.data,r=t.isLoading;return!r&&i&&Array.isArray(i)&&i.length>0?{data:i.reduce((function(t,i){return new Date(i.subscriptionExpiration).getTime()>new Date(t.subscriptionExpiration).getTime()?i:t}),i[0]),isLoading:!1}:{data:void 0,isLoading:r}},A=function(){var t=(0,p.B)(),i=U();return!1===t?{data:{activeSubscriptions:[],allSubscriptions:[],mostRecentSubscription:void 0,totalNumSubscriptionsActive:0,totalNumSubscriptionsAllTime:0}}:i}},24331:function(t,i,r){r.d(i,{w:function(){return a}});var e=r(40821),n=r(44828),o=r(54887),u=r(3674),a=function(){var t=(0,o.B)(),i=(0,n.sY)().formattedUrl;return(0,e.ZP)(t?i:null,(function(){return u.uS.get(i).then((function(t){return t.data}))}))}}}]);
//# sourceMappingURL=73668-f092ad24ad984f38.js.map