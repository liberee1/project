"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40159],{6733:function(t,e,r){r.d(e,{AN:function(){return b},FB:function(){return m},Hf:function(){return g},Pf:function(){return h},Xq:function(){return d},ZQ:function(){return p},_W:function(){return y},bw:function(){return v},dv:function(){return u},h2:function(){return l},nS:function(){return f}});var n=r(59499),a=r(11987),i=r(27349);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c=function(t){var e=t.urlParams,r=void 0===e?{}:e,n=t.queryParams,o=void 0===n?{}:n,c="/cart/".concat(r.isPrimary?i.Yl:i.d7),u=s({},o);return{url:c,defaultParams:u,formattedUrl:(0,a.format)({pathname:c,query:u})}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.urlParams,r=void 0===e?{}:e,n=t.queryParams,i=void 0===n?{}:n,o=c({urlParams:r,queryParams:i}),u=s({},o.defaultParams);return s(s({},o),{},{defaultParams:u,formattedUrl:(0,a.format)({pathname:o.url,query:u})})},l=c,d=c,m=function(t){var e=t.urlParams,r=void 0===e?{}:e,n=t.queryParams,i=void 0===n?{}:n,o="/cart/".concat(r.fromCartType,"/to/").concat(r.toCartType),c=s({},i);return{url:o,defaultParams:c,formattedUrl:(0,a.format)({pathname:o,query:c})}},v=function(t){var e=t.urlParams,r=void 0===e?{}:e,n="/organization/".concat(r.organizationId,"/invitations/").concat(r.status);return{url:n,formattedUrl:(0,a.format)({pathname:n})}},f=function(t){var e=t.urlParams,r="/account/user/".concat((void 0===e?{}:e).id,"/settings");return{url:r,formattedUrl:(0,a.format)({pathname:r})}},p=function(t){var e=t.urlParams,r="/account/user/".concat((void 0===e?{}:e).id,"/settings");return{url:r,formattedUrl:(0,a.format)({pathname:r})}},b=function(t){var e=t.urlParams,r=void 0===e?{}:e,n="/organization/".concat(r.organizationId,"/invitations/").concat(r.invitationId);return{url:n,formattedUrl:(0,a.format)({pathname:n})}},g=function(t){var e=t.urlParams,r="/organization/".concat((void 0===e?{}:e).organizationId,"/invitations");return{url:r,formattedUrl:(0,a.format)({pathname:r})}},y=function(t){var e=t.urlParams,r="/organization/users/".concat((void 0===e?{}:e).id);return{url:r,formattedUrl:(0,a.format)({pathname:r})}},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryParams,r=void 0===e?{}:e,n="/cart/".concat(i.Yl,"/quote"),o=s(s({},r),{},{exclude_comps:1,expand:"agreements"});return{url:n,defaultParams:o,formattedUrl:(0,a.format)({pathname:n,query:o})}}},2578:function(t,e,r){r.r(e),r.d(e,{Snackbar:function(){return v}});var n=r(59499),a=r(43267),i=r(20791),o=r(81391),s=r(27349),c=r(44421),u=r(57880),l=r(85893);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v=function(t){var e=t.isOpen,r=t.isSizeLimitWarning,n=void 0!==r&&r,d=t.addToCartStatus,v=t.handleSnackbarClose,f=(0,a.$G)(u.jey).t,p=(0,c.W)(),b=d.status,g=d.error,y={addToCartSuccess:f("common:actions_added_to_cart"),addToCartWarning:f("notifications:label_add_to_cart_failure"),sizeLimitWarning:f("ent:cart_size_limit_warning",{LIMIT:s.fv}),viewActionLabel:f("common:actions_view")},h=function(t){var e=t.status,r=t.isSizeLimitWarning,n=t.alertLabels;return r?n.sizeLimitWarning:e===o.MR?n.addToCartSuccess:n.addToCartWarning}({status:b,isSizeLimitWarning:n,alertLabels:y}),C={onClick:p,label:y.viewActionLabel};return(0,l.jsx)(i.DynamicSnackbar,m(m({},d.status===o.MR&&{alertAction:C}),{},{alertSeverity:b,error:g,handleSnackbarClose:v,isOpen:e&&!!b,message:h}))}},40159:function(t,e,r){r.d(e,{J:function(){return h},t:function(){return C}});var n=r(50029),a=r(87794),i=r.n(a),o=r(67294),s=r(32439),c=r(76023),u=r(59499),l=r(4730),d=r(5152),m=r.n(d),v=r(85893),f=["isActive"];function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var b=m()((function(){return Promise.all([r.e(98940),r.e(72578),r.e(38396),r.e(55296),r.e(7292),r.e(38799),r.e(16944),r.e(2430),r.e(29966),r.e(22172),r.e(96924),r.e(99709),r.e(6157)]).then(r.bind(r,94505)).then((function(t){return t.AddToCartDialog}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[94505]}}}),g=function(t){var e=t.isActive,r=(0,l.Z)(t,f);return(0,c.B)(e)&&(0,v.jsx)(b,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){(0,u.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({isActive:e},r))},y=r(2578),h=function(t){var e=t.addToCartStatus,r=t.assets,n=t.eventLabel,a=t.gridItems,i=t.isAddToCartDialogActive,o=t.isPrimary,s=t.isSnackBarOpen,u=t.isSizeLimitWarning,l=t.onAddToCart,d=t.onAlertSnackbarClose,m=t.setIsAddToCartDialogActive,f=t.pageSection,p=t.listId;return(0,c.B)(r)?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{assets:r,eventLabel:n,gridItems:a,isActive:i,isPrimary:o,listId:p,onAddToCart:l,pageSection:f,setIsActive:m}),(0,v.jsx)(y.Snackbar,{addToCartStatus:e,handleSnackbarClose:d,isOpen:s,isSizeLimitWarning:u})]}):null};h.defaultProps={addToCartStatus:{status:"",error:void 0},assets:null,gridItems:null};var C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.withOptimisticUpdate,r=void 0===e||e,a=t.setIsVerifying,c=(0,o.useState)(!1),u=c[0],l=c[1],d=(0,o.useState)(!1),m=d[0],v=d[1],f=(0,o.useState)(null),p=f[0],b=f[1],g=(0,o.useState)(null),y=g[0],C=g[1],P=(0,o.useState)(!0),S=P[0],O=P[1],w=(0,o.useState)(null),I=w[0],T=w[1],k=(0,o.useState)(null),j=k[0],L=k[1],x=(0,o.useState)(null),A=x[0],D=x[1],_=(0,s.gV)(),Z=_.addCartItems,B=_.moveToSaveForLater,E=_.moveToPrimary,U=_.addToCartStatus,z=_.isSizeLimitWarning,F=_.notAddedSelectVideos;(0,o.useEffect)((function(){return function(){return b(null)}}),[]);var M=(0,o.useCallback)((function(t){var e=t.assets,n=t.eventLabel,i=t.licenseId,o=t.formatType,s=t.licensePrice,c=t.cart,u=t.mutateCart,l=t.notAddedSelectVideoIds,d=t.pageSection,m=t.listId;null===a||void 0===a||a(!0),v(!0),Z({cart:c,eventLabel:n,gridItems:y,isPrimary:S,itemsToAdd:e||p,licenseId:i,formatType:o,licensePrice:s,mutateCart:u,notAddedSelectVideoIds:l,withOptimisticUpdate:r,pageSection:d,listId:m})}),[p,y,Z,S,a,r]),R=(0,o.useCallback)(function(){var t=(0,n.Z)(i().mark((function t(e){var r,n,o,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.itemsToMove,n=e.primaryCart,o=e.mutatePrimaryCart,s=e.mutateSavedForLaterCart,null===a||void 0===a||a(!0),v(!0),t.prev=3,t.next=6,E({itemsToMove:r,primaryCart:n,mutatePrimaryCart:o,mutateSavedForLaterCart:s});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),null===a||void 0===a||a(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),[E,a]),V=(0,o.useCallback)(function(){var t=(0,n.Z)(i().mark((function t(e){var r,n,o,s,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.itemsToMove,n=e.primaryCart,o=e.savedForLaterCart,s=e.mutatePrimaryCart,c=e.mutateSavedForLaterCart,null===a||void 0===a||a(!0),v(!0),t.prev=3,t.next=6,B({itemsToMove:r,primaryCart:n,savedForLaterCart:o,mutatePrimaryCart:s,mutateSavedForLaterCart:c});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),null===a||void 0===a||a(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),[B,a]),q=(0,o.useMemo)((function(){return{addToCartStatus:U,assets:p,eventLabel:A,gridItems:y,isAddToCartDialogActive:u,isPrimary:S,isSizeLimitWarning:z,isSnackBarOpen:m,onAddToCart:M,onAlertSnackbarClose:function(){return v(!1)},notAddedSelectVideos:F,setIsAddToCartDialogActive:l,pageSection:I,listId:j}}),[p,y,U,A,j,I,u,S,z,m,F,M]),W=(0,o.useCallback)((function(t){var e=t.assets,r=t.eventLabel,n=t.gridItems,a=t.isMoveToPrimaryCart,i=void 0!==a&&a,o=t.isMoveToSavedForLaterCart,s=void 0!==o&&o,c=t.isPrimaryCart,u=void 0===c||c,d=t.mutatePrimaryCart,m=t.mutateSavedForLaterCart,v=t.primaryCart,f=t.savedForLaterCart,p=t.withDialog,g=void 0===p||p,y=t.licenseId,h=t.licensePrice,P=t.pageSection,S=t.listId;b(e),O(u),T(P),D(r),L(S),n&&C(n),i?R({itemsToMove:e,primaryCart:v,mutatePrimaryCart:d,mutateSavedForLaterCart:m}):s?V({itemsToMove:e,primaryCart:v,savedForLaterCart:f,mutatePrimaryCart:d,mutateSavedForLaterCart:m}):g?l(!0):M({assets:e,eventLabel:r,cart:v,licenseId:y,licensePrice:h,mutateCart:d,pageSection:P})}),[M,R,V]);return{addToCartViewsProps:q,addToCartViewsHandler:W,AddToCartViews:h}}},29933:function(t,e,r){r.d(e,{K:function(){return m}});var n=r(59499),a=r(17674),i=r(67294),o=r(87883),s=r(65014),c=r(95101),u=r(87686);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m=function(){var t=(0,u.yh)().analytics,e=(0,c.Y)().getSearchContext,r=(0,i.useCallback)((function(e){var r=e.cartId,n=(e.items||[]).map((function(t,e){return(0,s.zm)({asset:t,cartId:r,index:e})})),a=n.reduce((function(t,e){return{totalPrice:t.totalPrice+Number(e.price),toBeBilled:t.toBeBilled+1}}),{totalPrice:0,toBeBilled:0});t.cartViewed({products:n,cartId:r,cartTotal:Math.round(100*a.totalPrice)/100,numItemsBilledToCard:a.toBeBilled,shouldCheckout:a.totalPrice>0,shouldDownload:n.length>0&&0===a.totalPrice})}),[t]);return{productAddedAnalyticsEvent:(0,i.useCallback)((function(r){var n=r.cart,a=r.eventLabel,i=r.gridItems,o=r.items,c=r.licenseId,u=r.licensePrice,l=r.listId,d=r.pageSection;t.productAdded({products:o.map((function(t){return(0,s.bR)({asset:t,cartData:n,getSearchContext:e,gridItems:i,licenseId:c,licensePrice:u,pageSection:d})})),eventLabel:a,list_id:null!==l&&void 0!==l?l:""})}),[t,e]),productRemovedAnalyticsEvent:(0,i.useCallback)((function(r){var n=r.cart,i=r.eventLabel,c=r.gridItems,u=r.items,l=r.listId,m=r.matchingCartItem,v=r.pageSection;if(m){var f=(0,a.Z)(u,1)[0];t.productRemoved(d(d({},(0,s.bR)({asset:f,cartData:n,getSearchContext:e,gridItems:c,pageSection:v})),{},{price:m.price===o.q9?0:Number(m.price),variant:m.licenseId,eventLabel:i,list_id:null!==l&&void 0!==l?l:""}))}else t.productRemoved({products:u.map((function(t){return(0,s.bR)({asset:t,cartData:n,getSearchContext:e,gridItems:c,pageSection:v})})),eventLabel:i,list_id:null!==l&&void 0!==l?l:""})}),[t,e]),cartViewedAnalyticsEvent:r}}},62551:function(t,e,r){r.d(e,{k:function(){return l}});var n=r(17674),a=r(11163),i=r(67294),o=r(44246),s=r(85138),c=r(54887),u=r(13806),l=function(){var t=(0,s.D)().isBrandSstk,e=(0,a.useRouter)(),r=(0,c.B)(),l=(0,u.j)({isLoggedInUser:r,isBrandSstk:t});return(0,i.useMemo)((function(){var r=(0,n.Z)(l,1)[0];return t?(0,o.DW)({language:e.locale,relativePath:r}):r}),[l,t,e])}},44421:function(t,e,r){r.d(e,{W:function(){return s}});var n=r(11163),a=r(67294),i=r(85138),o=r(62551),s=function(){var t=(0,o.k)(),e=(0,i.D)().isBrandSstk,r=(0,n.useRouter)();return(0,a.useCallback)((function(){e?window.location.href=t:r.push(t)}),[t,e,r])}},32439:function(t,e,r){r.d(e,{D9:function(){return U},GH:function(){return F},Z4:function(){return R},gV:function(){return M},kC:function(){return z}});var n=r(4730),a=r(50029),i=r(90116),o=r(59499),s=r(87794),c=r.n(s),u=r(11163),l=r(67294),d=r(40821),m=r(6733),v=r(81391),f=r(16257),p=r(39338),b=r(87883),g=r(27349),y=r(77573),h=r(93126),C=r(65014),P=r(60996),S=r(20559),O=r(52087),w=r(48483),I=r(68733),T=r(95101),k=r(29933),j=r(73668),L=r(42926),x=r(3674),A=r(54887),D=["isLoading"];function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var B="Size limit warning",E=function(t){var e,r=t.asset;return r.itemType===b.k4&&!r.sizes&&!(null!==(e=r.metadata)&&void 0!==e&&e.cart.sizes)},U=function(t){var e=t.cartItems,r=void 0===e?[]:e,n=t.subscriptions;return r.filter((function(t){return[b.k4,b.pX,b.j0,b.gP,b.cF].includes(t.itemType)})).map((function(t){var e,r,a,i,s,c,u,l,d,m,v,f,g,y,P=function(t){var e=t.item,r=t.subscriptions,n=e.itemType,a=e.metadata,i=(0,O.Qo)({asset:e}),o=null===a||void 0===a?void 0:a.cart.licenseId,s=r.allSubscriptions;switch(n){case b.pX:return(0,w.eL)({licenseName:o,subscriptions:s});case b.j0:case b.k4:default:return(0,w.$L)({licenseName:o,subscriptions:s,assetType:n,contentTier:i})}}({item:t,subscriptions:n}),S=function(t){var e,r,n=t.item;return(null===(e=n.largeThumb)||void 0===e?void 0:e.url)||(null===(r=n.preview)||void 0===r?void 0:r.url)||n.preview||n.thumb||""}({item:t}),I=(0,w.U)({uniqueSubscription:P}),T=I.price,k=void 0===T?0:T,j=I.priceType,L=void 0===j?h.Zm:j,x=null===(e=t.meta)||void 0===e?void 0:e.search_context;null!==(r=t.metadata)&&void 0!==r&&null!==(a=r.cart)&&void 0!==a&&a.searchContext&&(x=(0,C.Be)({trackingId:null===(d=t.metadata)||void 0===d||null===(m=d.cart)||void 0===m||null===(v=m.searchContext)||void 0===v?void 0:v.searchTrackingId,searchTerm:null===(f=t.metadata)||void 0===f||null===(g=f.cart)||void 0===g||null===(y=g.searchContext)||void 0===y?void 0:y.searchTerm}));return Z(Z(Z({},t),{},{id:t.itemId},[b.k4,b.gP,b.cF].some((function(e){return e===t.itemType}))&&{image:{id:t.itemId,categories:t.categories,description:t.description||t.subhead||"",url:S.replace("-150nw","-260nw"),isEditorial:!!t.isEditorial,isPremium:!!t.isPremium,displays:(0,o.Z)({},p.RA,{height:(null===(i=t.largeThumb)||void 0===i?void 0:i.height)||(null===(s=t.preview)||void 0===s?void 0:s.height),width:(null===(c=t.largeThumb)||void 0===c?void 0:c.width)||(null===(u=t.preview)||void 0===u?void 0:u.width)}),permalink:t.permalink,isIllustration:t.isIllustration,isVector:t.isVector}}),{},{type:t.itemType,isFootageSelect:t.footageSelect,price:k,priceType:L,currency:(null===P||void 0===P?void 0:P.creditCurrency)||"",licenseId:(null===(l=t.metadata)||void 0===l?void 0:l.cart.licenseId)||"",subscriptionId:(null===P||void 0===P?void 0:P.id)||"-",hasCreditsRemaining:(0,w.rZ)({subscription:P}),isUnavailableAsset:E({asset:t}),isUnlimited:(0,w.qY)({subscription:P}),meta:Z({},x?{search_context:x}:{})})}))},z=function(t){var e=t.isPrimary;return(0,m.dv)({urlParams:{isPrimary:e}}).formattedUrl},F=function(t){var e=t.isPrimary,r=(0,A.B)(),n=(0,j.av)().data;return(0,d.ZP)(r&&n?z({isPrimary:e}):null,(function(t){return x.jm.get(t).then((function(t){var e=t.data;return e&&Z(Z({},e),{},{items:U({cartItems:e.items,subscriptions:n})})}))}))},M=function(){var t=(0,l.useState)({status:"",error:void 0}),e=t[0],r=t[1],n=(0,l.useState)(!1),o=n[0],s=n[1],p=(0,l.useRef)(!1),h=(0,k.K)(),C=h.productAddedAnalyticsEvent,O=h.cartViewedAnalyticsEvent,w=h.productRemovedAnalyticsEvent,I=(0,T.Y)().getSearchContext,j=(0,u.useRouter)(),L=(0,l.useCallback)((function(t){"undefined"===typeof(null===t||void 0===t?void 0:t.cartId)||p.current||(p.current=!0,O(t))}),[p,O]),A=(0,l.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){var r=t.id;return-1===e.findIndex((function(t){var e=t.id;return r===e}))}))}),[]),D=(0,l.useCallback)((function(t){var e=t.cartItems,r=void 0===e?[]:e,n=t.itemsToAdd,a=void 0===n?[]:n,o=(0,i.Z)(r);return a.forEach((function(t){var e=(0,P.rw)({asset:t}),r=o.findIndex((function(r){var n=r.id,a=r.type;return n===t.id&&a===e}));r>-1?o[r]=Z({},t):o.unshift(Z(Z({},t),{},{addedTime:new Date}))})),o}),[]),_=(0,l.useCallback)(function(){var t=(0,a.Z)(c().mark((function t(e){var r,n,i,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.items,n=e.licenseId,i=e.licenseAsJpeg,o=null===r||void 0===r?void 0:r.map(function(){var t=(0,a.Z)(c().mark((function t(e){var r,a,o,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,P.rw)({asset:e}),a=n||e.licenseId,o=i||e.licenseAsJpeg,t.next=5,(0,S.Oo)({asset:e,licenseName:a});case 5:return s=t.sent,t.abrupt("return",{item_id:e.id,item_type:r,metadata:{cart:{license_id:a,license_as_jpeg:o,subscription_id:e.subscriptionId,size:s.content_size,format:s.content_format,sizes:(0,S.rB)({asset:e}),search_context:I(e),source:[b.gP,b.cF].some((function(t){return t===r}))?y._e:""}}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",Promise.all(o));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[I]),E=(0,l.useCallback)(function(){var t=(0,a.Z)(c().mark((function t(e){var n,a,i,o,u,l,p,b,y,h,P,S,O,T,k,j,L;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.cart,a=e.eventLabel,i=e.gridItems,o=e.isPrimary,u=void 0===o||o,l=e.itemsToAdd,p=e.licenseId,b=e.formatType,y=e.licensePrice,h=e.mutateCart,P=e.withOptimisticUpdate,S=void 0===P||P,O=e.pageSection,T=e.listId,t.prev=1,k=l.map((function(t){return Z(Z({},t),{},{meta:Z({search_context:I(t)},t.meta)})})),r({status:"",error:void 0}),s(!1),!((j=D({cartItems:n.items,itemsToAdd:k})).length>g.fv)){t.next=10;break}return r({status:v.cM}),s(!0),t.abrupt("return");case 10:return S&&h((function(t){return Z(Z({},t),{},{items:j})}),!1),L=(0,m.Xq)({urlParams:{isPrimary:u}}).formattedUrl,t.t0=x.jm,t.t1=L,t.next=16,_({items:k,licenseId:p,licenseAsJpeg:b===f._3});case 16:return t.t2=t.sent,t.next=19,t.t0.post.call(t.t0,t.t1,t.t2);case 19:r({status:v.MR}),u&&k.forEach((function(t){var e=n.items.find((function(e){return e.id===t.id}));e&&p!==e.licenseId&&w({cart:n,eventLabel:a,gridItems:i,items:[t],matchingCartItem:e,pageSection:O}),C({cart:n,eventLabel:a,gridItems:i,items:[t],licenseId:p,licensePrice:y,pageSection:O,listId:T})})),t.next=26;break;case 23:t.prev=23,t.t3=t.catch(1),r({status:v.cM,error:t.t3});case 26:return t.prev=26,t.next=29,(0,d.JG)(z({isPrimary:u}));case 29:return t.finish(26);case 30:case"end":return t.stop()}}),t,null,[[1,23,26,30]])})));return function(e){return t.apply(this,arguments)}}(),[D,_,C,w,I]),U=(0,l.useCallback)(function(){var t=(0,a.Z)(c().mark((function t(e){var r,n,a,o,s,u,l,v,f,p,b,g,y,h;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.cartData,n=e.eventLabel,a=e.gridItems,o=e.isPrimary,s=void 0===o||o,u=e.itemsToRemove,l=void 0===u?[]:u,v=e.mutateCart,f=e.pageSection,p=e.routePathProps,b=e.withOptimisticUpdate,g=void 0===b||b,y=e.mutateCallback,t.prev=1,g&&v((function(t){return Z(Z({},t),{},{items:A(t.items,l)})}),!1),h=(0,m.h2)({urlParams:{isPrimary:s}}).formattedUrl,t.next=6,x.jm.delete(h,{data:l.map((function(t){return{item_id:t.id,item_type:(0,P.rw)({asset:t})}}))});case 6:s&&w({cart:r,eventLabel:n,gridItems:a,items:l,pageSection:f}),p&&j.push.apply(j,(0,i.Z)(p)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:if(t.prev=12,!y){t.next=17;break}y({isPrimary:s}),t.next=19;break;case 17:return t.next=19,(0,d.JG)(z({isPrimary:s}));case 19:return t.finish(12);case 20:case"end":return t.stop()}}),t,null,[[1,10,12,20]])})));return function(e){return t.apply(this,arguments)}}(),[j,w,A]),F=(0,l.useCallback)(function(){var t=(0,a.Z)(c().mark((function t(e){var n,a,i,o,u,l,d,f,p;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.eventLabel,a=e.itemsToMove,i=e.pageSection,o=e.primaryCart,u=e.savedForLaterCart,l=e.mutatePrimaryCart,d=e.mutateSavedForLaterCart,r({status:"",error:void 0}),s(!1),!((f=D({cartItems:u.items,itemsToAdd:a})).length>g.fv)){t.next=8;break}throw r({status:v.cM}),s(!0),new Error(B);case 8:return l((function(t){return Z(Z({},t),{},{items:A(t.items,a)})}),!1),d((function(t){return Z(Z({},t),{},{items:f})}),!1),p=(0,m.FB)({urlParams:{fromCartType:g.Yl,toCartType:g.d7}}).formattedUrl,t.t0=x.jm,t.t1=p,t.next=15,_({items:a});case 15:return t.t2=t.sent,t.next=18,t.t0.post.call(t.t0,t.t1,t.t2);case 18:w({cart:o,eventLabel:n,items:a,pageSection:i});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[D,_,w,A]),M=(0,l.useCallback)(function(){var t=(0,a.Z)(c().mark((function t(e){var n,a,i,o,u,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.itemsToMove,a=e.primaryCart,i=e.mutatePrimaryCart,o=e.mutateSavedForLaterCart,r({status:"",error:void 0}),s(!1),!((u=D({cartItems:a.items,itemsToAdd:n})).length>g.fv)){t.next=8;break}throw r({status:v.cM}),s(!0),new Error(B);case 8:return o((function(t){return Z(Z({},t),{},{items:A(t.items,n)})}),!1),i((function(t){return Z(Z({},t),{},{items:u})}),!1),l=(0,m.FB)({urlParams:{fromCartType:g.d7,toCartType:g.Yl}}).formattedUrl,t.t0=x.jm,t.t1=l,t.next=15,_({items:n});case 15:return t.t2=t.sent,t.next=18,t.t0.post.call(t.t0,t.t1,t.t2);case 18:C({cart:a,items:n});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[D,_,C,A]);return{triggerCartViewedEvent:L,addCartItems:E,removeCartItems:U,moveToSaveForLater:F,moveToPrimary:M,addToCartStatus:e,setAddToCartStatus:r,isSizeLimitWarning:o}},R=function(t){var e=t.cartItems,r=(0,j.av)().data,a=(0,L.U)(),i=a.isLoading,o=(0,n.Z)(a,D),s=!r||i,c=function(t){var e=t.items;return null===e||void 0===e?void 0:e.some((function(t){return!t.hasCreditsRemaining}))}({items:e}),u=(0,w.ky)({items:e,isLoading:s,subscriptions:r,userCapabilities:o}),l=u.amountType,d=u.hasInsufficientSubscriptionCredits,m=u.insufficientAmount,v=u.hasLowDebitableBalance;return{amountType:l,isDebitableUser:(0,I.Kc)({userCapabilities:o}),userCanViewDebitableBalance:(0,I.LQ)({userCapabilities:o}),hasInsufficientCartItemsCredits:c,hasInsufficientSubscriptionCredits:d,insufficientAmount:m,hasLowDebitableBalance:v}}},13806:function(t,e,r){r.d(e,{A:function(){return p},j:function(){return f}});var n,a=r(59499),i=r(11987),o=r.n(i),s=r(27349),c=r(139),u="cart",l="content-license",d="ecomm-logged-in",m="success",v=(0,a.Z)({},u,(n={},(0,a.Z)(n,c.Dx,s.Is),(0,a.Z)(n,d,s.nK),(0,a.Z)(n,l,(0,a.Z)({},m,"".concat(s.Is,"/").concat(l,"/").concat(m))),n)),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isLoggedInUser,r=t.isBrandSstk,n=v.cart[e&&r?d:c.Dx];return[n,n]},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o().format({pathname:v.cart[l].success,query:t});return[e,e]}}}]);
//# sourceMappingURL=40159-4466cea0972fb6b5.js.map