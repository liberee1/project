"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65845],{65845:function(e,t,n){n.d(t,{r:function(){return Z}});var r=n(50029),s=n(87794),i=n.n(s),a=n(67294),o=n(3263),c=n(22430),u=n(68423),l=n(76382),p=n(59499),d=n(4730),f=n(5152),b=n.n(f),m=n(76023),O=n(85893),g=["isOpen"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var y=b()((function(){return Promise.all([n.e(98940),n.e(16944),n.e(51370),n.e(96924),n.e(26971)]).then(n.bind(n,88698)).then((function(e){return e.CompLicensingDialog}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[88698]}}}),w=function(e){var t=e.isOpen,n=(0,d.Z)(e,g);return(0,m.B)(t)&&(0,O.jsx)(y,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},j=["isOpen"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=b()((function(){return Promise.all([n.e(98940),n.e(72578),n.e(39636),n.e(51814),n.e(29966),n.e(22172),n.e(23365)]).then(n.bind(n,95842)).then((function(e){return e.CompLicensingDrawer}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[95842]}}}),P=function(e){var t=e.isOpen,n=(0,d.Z)(e,j);return(0,m.B)(t)&&(0,O.jsx)(S,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},k=["isOpen"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=b()((function(){return n.e(25307).then(n.bind(n,25307)).then((function(e){return e.CompLicensingSnackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[25307]}}}),x=function(e){var t=e.isOpen,n=(0,d.Z)(e,k);return(0,m.B)(t)&&(0,O.jsx)(_,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},C=n(43267),L=n(46254),E=n(57880),z=function(e){var t=e.assets,n=e.compLicensingHandler,r=e.isDialogOpen,s=e.isDrawerOpen,i=e.isLicensing,a=e.isSnackBarOpen,o=e.licensingError,c=e.onDialogClose,u=e.onDrawerClose,l=e.onSnackbarClose,p=e.selectedAssetSize,d=e.setSelectedAssetSize,f=e.settingsData,b=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).licensingError,t=void 0===e?{}:e,n=(0,C.$G)(E.clK).t;return{cancel:n("common:actions_cancel"),downloadComp:n("common:actions_download_comp"),enterpriseCompLicense:n("ent:license_enterprise_comp"),genericErrorMessage:n("ent:license_now_error_message"),licensingError:(0,L.j2)({error:t,t:n}),licenseSuccess:n("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:n("common:actions_download_comp"),disclaimer:(0,O.jsx)(C.cC,{i18nKey:"ent:comp_disclaimer",ns:E.clK,components:{bold:(0,O.jsx)("strong",{})}}),metadataFound:n("ent:previous_metadata_found_comp"),metadataMissing:n("ent:previous_metadata_missing_comp"),title:n("ent:add_metadata_to_comp")}}}({licensingError:o});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w,{assets:t,isOpen:r,onClose:c,onLicense:n,labels:b,isLicensing:i,selectedAssetSize:p,setSelectedAssetSize:d,settingsData:f}),(0,O.jsx)(P,{assets:t,isLicensing:i,isOpen:s,labels:b,onClose:u,onLicense:n}),(0,O.jsx)(x,{isOpen:a,message:b.licensingError,onClose:l})]})};z.defaultProps={assets:null,isDialogOpen:!1,isDrawerOpen:!1,isLicensing:!1,isSnackBarOpen:!1,licensingError:{},selectedAssetSize:"",settingsData:{}};var F=n(96298),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowMetadata,n=void 0===t||t,s=(0,a.useState)(null),p=s[0],d=s[1],f=(0,a.useState)(""),b=f[0],m=f[1],O=(0,a.useState)(""),g=O[0],v=O[1],y=(0,a.useState)(!1),w=y[0],j=y[1],h=(0,a.useState)(!1),S=h[0],P=h[1],k=(0,a.useState)(!1),D=k[0],_=k[1],x=(0,u.Z)(),C=x.isLicensing,L=x.licensingError,E=x.licensingStatus,Z=x.setLicensingStatus,A=x.licensingAssetsHandler,U=(0,c.U)(),I=(0,l.B)(),B=I.data,G=(0,a.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,s,a,o,c,u,l,p,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,r=void 0===n?[]:n,s=t.assetSize,a=t.metadata,o=t.pageSection,c=t.listId,m(r[0].id),u=!1,e.prev=3,e.next=6,(0,F.qP)({assets:r,assetSize:s,metadata:a,selectedAssetSize:g});case 6:return l=e.sent,e.next=9,A(l);case 9:if(p=e.sent,d=p.data,(0,F.bj)(r)&&1===r.length){e.next=15;break}return e.next=14,(0,F.tX)({assets:r,licensedContent:null===d||void 0===d||null===(f=d.meta)||void 0===f?void 0:f.licensedContent});case 14:U({assets:r,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:o,listId:c});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),u=e.t0;case 20:return m(""),u&&!S&&_(!0),e.abrupt("return",{error:u});case 23:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),[S,A,U,g]),M=(0,a.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var r,s,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.assets,s=t.assetSize,a=t.metadata,c=t.pageSection,u=t.listId,d(r),Z(""),!(!w&&(0,o.U0)(r))){e.next=7;break}return j(!0),e.abrupt("return",Promise.resolve(null));case 7:if(!(!S&&(null===B||void 0===B?void 0:B.requireMetadataForComp)&&!a)||!n){e.next=12;break}return s&&v(s),P(!0),e.abrupt("return",Promise.resolve(null));case 12:return e.abrupt("return",G({assets:r,assetSize:s,metadata:a,pageSection:c,listId:u}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,G,w,S,B,Z]),q=(0,a.useMemo)((function(){return{assets:p,compLicensingHandler:M,compLicensingRequest:G,isDialogOpen:w,isDrawerOpen:S,isLicensing:C,isSnackBarOpen:D,licensingError:L,onDialogClose:function(){return j(!1)},onDrawerClose:function(){return P(!1)},onSnackbarClose:function(){return _(!1)},selectedAssetSize:g,setSelectedAssetSize:v,settingsData:B}}),[p,M,G,w,S,C,D,L,g,B]);return{assetsToLicense:p,compLicensingHandler:M,compLicensingProps:q,CompLicensingViews:z,licensingAssetId:b,licensingStatus:E}}},96298:function(e,t,n){n.d(t,{SN:function(){return v},bj:function(){return S},qP:function(){return h},tX:function(){return y}});var r=n(59499),s=n(50029),i=n(87794),a=n.n(i),o=n(3578),c=n(44828),u=n(87883),l=n(60969),p=n(55687),d=n(60996),f=n(52087),b=n(18937),m=n(3674);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){var e=(0,s.Z)(a().mark((function e(t){var n,r,s,i,o,u,l,d,b,O,g,v,y,w,j,h,S,P,k,D;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,r=t.licensedContent,s=t.supplementalUrlType,i=r[0]||{},o=i.downloadUrl,u=i.contentId,l=i.contentFormat,d=i.contentSize,null===(b=i.supplementalUrls)||void 0===b||!b.length||!s){e.next=5;break}return O=b.find((function(e){return e.type===s}))||{},g=O.url,v=void 0===g?o:g,e.abrupt("return",v);case 5:if(y=n.find((function(e){return e.id===u}))||{},w=(0,f.Tp)(y),j=(0,p.G)({assets:n,contentId:u}),h=j.filename,!j.shouldUpdateFilename){e.next=21;break}return e.prev=9,e.next=12,m.uS.post((0,c.u8)().formattedUrl,{data:[{media_id:y.id,media_type:w,media_size:d,media_format:l,filename:h}]});case 12:return S=e.sent,P=S.data,k=(null===P||void 0===P?void 0:P.data[0])||{},D=k.attributes,e.abrupt("return",D.url||o);case 18:return e.prev=18,e.t0=e.catch(9),e.abrupt("return",o);case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.Z)(a().mark((function e(t){var n,r,s,i,c,u,l,d,f,O;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,r=void 0===n?[]:n,s=t.licensedContent,!((i=void 0===s?[]:s).length>1)){e.next=10;break}return c=(0,p.r)({assets:r,licensedContent:i}),u=(0,o.e)({urlParams:{filename:c.bundleFilename}}).formattedUrl,e.next=6,m.jl.post(u,c.content);case 6:return l=e.sent,d=l.data,f=d.public_url,e.abrupt("return",(0,b.A_)(f));case 10:return e.next=12,v({assets:r,licensedContent:i});case 12:return O=e.sent,e.abrupt("return",(0,b.A_)(O));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=(0,d.Fy)({asset:e});return g(g({},e),{},{assetType:t,licenseId:l._r[t]})}))},j=function(){var e=(0,s.Z)(a().mark((function e(){var t,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.d0)(),n=t.url,e.prev=1,e.next=4,m.uS.get(n).then((function(e){return null===e||void 0===e?void 0:e.data}));case 4:return s=e.sent,e.abrupt("return",s.reduce((function(e,t){return g(g({},e),{},(0,r.Z)({},t.name,"-"))}),{}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)(a().mark((function e(){var t,n,r,s,i,o,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.assets,r=t.assetSize,s=t.metadata,i=t.selectedAssetSize,o=s){e.next=6;break}return e.next=5,j();case 5:o=e.sent;case 6:return e.abrupt("return",{assets:w(n),licenseMetadata:o,licensingType:l.td,selectedAssetSize:r||i||"",isVideoComp:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,d.qw)({asset:e[0]||{}})===u.j0}},55687:function(e,t,n){n.d(t,{G:function(){return o},r:function(){return c}});var r=n(52087),s=n(69465),i="shutterstock",a="shutterstock_editorial",o=function(e){var t=e.assets,n=e.contentId,s=function(e){var t=e.asset;return(0,r.PD)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,r.tS)({asset:t})?{prefix:a,shouldUpdateFilename:!1}:{prefix:i,shouldUpdateFilename:!1}}({asset:t.find((function(e){return e.id===n}))||{}}),o=s.prefix,c=s.shouldUpdateFilename;return{filename:"".concat(o,"_").concat(n),shouldUpdateFilename:c}},c=function(e){var t=e.assets,n=void 0===t?[]:t,c=e.licensedContent,u=void 0===c?[]:c,l=n.every((function(e){return(0,r.tS)({asset:e})})),p=u.map((function(e){var t=e.contentId,r=e.downloadUrl,s=e.contentFormat,i=o({assets:n,contentId:t}).filename,a=r.split("/").pop().split(".").pop();return(a.length>4||a.length<2)&&(a=s),{filename:"".concat(i,".").concat(a),url:r}})),d=(0,s.zs)();return{bundleFilename:"".concat(l?a:i,"_").concat(d,".zip"),content:p}}},22430:function(e,t,n){n.d(t,{U:function(){return p}});var r=n(59499),s=n(67294),i=n(83363),a=n(85406),o=n(65014),c=n(87686);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){var e=(0,c.yh)().analytics,t=(0,a.PE)().locale;return(0,s.useCallback)((function(n){var r=n.assets,s=void 0===r?[]:r,a=n.audioContext,c=n.eventLabel,u=n.licenseId,p=n.isRedownload,d=n.isQuickDownload,f=n.isPaid,b=n.isComp,m=n.pageSection,O=n.listId,g=c||b&&i.Vp1||void 0;e.productDownloaded(l({products:s.map((function(e){return(0,o.bR)({asset:e,shouldGetSearchContextFromAsset:!0,licenseId:u,pageSection:m})})),download_context:(0,o.OB)({asset:s[0],isComp:b,isPaid:f,isQuickDownload:d,isRedownload:p,language:t}),eventLabel:g,list_id:null!==O&&void 0!==O?O:""},a&&{audio_context:l({},a)}))}),[e,t])}}}]);
//# sourceMappingURL=65845-8dc610373977ffcc.js.map