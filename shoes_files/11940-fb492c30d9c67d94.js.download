"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11940],{11940:function(e,t,n){n.d(t,{VL:function(){return Q}});var r=n(5152),o=n.n(r),i=n(67294),s=n(42671),a=n(95051),c=n(52087),u=n(33485),l=n(74937),d=n(76023),p=n(59499),f=n(50029),g=n(87794),v=n.n(g),y=n(40821),m=n(44828),b=n(81391),h=n(87883),O=n(30401),C=n(26231),P=n(65014),S=n(3263),w=n(43820),T=n(67974),I=n(70802),A=n(85138),k=n(87686),j=n(3674),D=n(58682),x=n(43224),_=function(e){var t=e.queryParams;return(0,m.nS)({queryParams:t}).formattedUrl};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.assetId,n=e.asset,r=n.id,o=n.tier,i=void 0===o?10:o,s=n.src,a=n.aspect,c=n.width,u=n.height;return{metadata:{notes:{media_id:t,alpha_num_id:r,rex_id:r,media_type:h.gP,tier:i,media:{aspect:a,width:c,height:u,url:s}}}}},M=function(){var e=(0,f.Z)(v().mark((function e(t){var n,r,o,i,s,a,u,l,d,p,f,g,y;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isRexEditorial,o=t.collectionId,i=t.verificationCode,s=t.setAsCover,a=t.firstAsset,u=t.collectionType,(l=(0,c.A8)(a))===h.VT){e.next=4;break}return e.abrupt("return");case 4:return d={id:o,verificationCode:i,collectionType:u},p=(0,m.Yz)({queryParams:d}).formattedUrl,e.next=8,j.uS.get(p).then((function(e){return(0,D.O)(e.data)||{}}));case 8:if(null!==(f=e.sent)&&void 0!==f&&null!==(n=f.coverItem)&&void 0!==n&&n.id){e.next=14;break}return g=(0,c.OP)({asset:a,isRexEditorial:r}),y=(0,w.Q)({collectionId:o,mappedAssetType:l,assetId:g}),e.next=14,s({collection:{id:o},mediaItem:{id:y}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=n(54887),R=n(67126),B=n(4730),J=n(85893),N=["isOpen"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=o()((function(){return Promise.all([n.e(98940),n.e(72578),n.e(38396),n.e(55296),n.e(7292),n.e(38799),n.e(52663),n.e(11514),n.e(84060),n.e(29966),n.e(22172),n.e(60108)]).then(n.bind(n,17968)).then((function(e){return e.CollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[17968]}}}),L=function(e){var t=e.isOpen,n=(0,B.Z)(e,N);return(0,d.B)(t)&&(0,J.jsx)(G,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},F=o()((function(){return n.e(46363).then(n.bind(n,46363)).then((function(e){return e.LazyAddToCollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[46363]}}}),H=o()((function(){return n.e(11324).then(n.bind(n,11324)).then((function(e){return e.Snackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[11324]}}}),z=function(e){var t=e.assets,n=e.assetType,r=e.collectionId,o=e.collectionTitle,a=e.gridItems,c=e.isDialogActive,u=e.isSnackBarOpen,l=e.onAddToCollections,p=e.onAlertSnackbarClose,f=e.onAddToCollectionsComplete,g=e.redirectToCDPAction,v=e.setIsDialogActive,y=e.showCopyToModalTitle,m=e.status,b=e.verificationCode,h=e.pageSection,O=(0,R.p)(s.vb),C=(0,R.p)(s.pG),P=(0,d.B)(t),S=(0,i.useCallback)((function(){return v(!1)}),[v]);return P?O||C?(0,J.jsx)(F,{onClose:S,isOpen:c,items:t,onAddToCollectionsComplete:f,pageSection:h}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(L,{assets:t,assetType:n,collectionId:r,gridItems:a,isOpen:c,onAddToCollections:l,setIsDialogActive:v,showCopyToModalTitle:y,pageSection:h}),(0,J.jsx)(H,{assetType:n,collectionId:r,collectionTitle:o,isOpen:u,onAlertSnackbarClose:p,redirectToCDPAction:g,status:m,verificationCode:b})]}):null};z.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var Q=function(e){var t=e.initialAssetType,n=(0,i.useState)(!1),r=n[0],o=n[1],s=(0,i.useState)(!1),d=s[0],g=s[1],D=(0,i.useState)(!1),Z=D[0],R=D[1],B=(0,i.useState)(""),J=B[0],N=B[1],V=(0,i.useState)(null),G=V[0],L=V[1],F=(0,i.useState)(t),H=F[0],Q=F[1],W=(0,i.useState)(null),X=W[0],Y=W[1],K=(0,i.useState)(null),$=K[0],ee=K[1],te=(0,i.useState)(null),ne=te[0],re=te[1],oe=(0,U.B)(),ie=(0,u.cM)(),se=(0,l.L)(),ae=(0,i.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:se}),ce=ae[0],ue=ae[1],le=function(){var e=(0,i.useState)({status:"",error:void 0}),t=e[0],n=e[1],r=(0,i.useState)(""),o=r[0],s=r[1],a=(0,i.useState)(""),u=a[0],l=a[1],d=(0,I.J)(),g=(0,x.w)().setAsCover,D=(0,A.D)().isBrandSstk,Z=(0,k.yh)().analytics,U=(0,P.UM)(Z),R=(0,i.useCallback)(function(){var e=(0,f.Z)(v().mark((function e(t){var r,o,i,a,u,f,P,I,A,k,x,Z,R,B,J,N,V,G,L,F,H,z,Q,W;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.assets,o=t.assetType,i=t.gridItems,a=t.groupedOptions,u=t.id,f=t.title,P=t.verificationCode,I=t.pageSection,A=t.listId,k=(0,S.wZ)({assetType:o,isBrandSstk:D}),e.prev=2,n({status:b.MR,error:void 0}),x=(0,c.Xo)(o),Z=u,R=P,a&&a.length&&(B=a.find((function(e){return e.title===f})))&&(Z=B.id,R=B.verificationCode),Z){e.next=19;break}return J=(0,m.A6)().formattedUrl,N={data:{attributes:{title:f,collectionType:k,isPublic:!1},type:O.Ul}},e.next=13,j.uS.post(J,N);case 13:V=e.sent,G=V.data,L=G.id,F=G.attributes.verificationCode,Z=L,R=F;case 19:return H={data:r.map((function(e){var t=(0,c.OP)({asset:e,isRexEditorial:x}),n=(0,c.A8)(e);return E({type:O.A8,id:(0,w.Q)({collectionId:Z,mappedAssetType:n,assetId:t})},n===h.VT&&q({assetId:t,asset:e}))}))},z=(0,m.mp)({urlParams:{id:Z},queryParams:{isRexEditorial:x}}).formattedUrl,Q=(0,T.y)(U),e.next=24,j.uS.post(z,H,Q?{headers:(0,p.Z)({},C.as,Q)}:void 0);case 24:return W=r[0],e.next=27,M({isRexEditorial:x,collectionId:Z,verificationCode:R,setAsCover:g,firstAsset:W,collectionType:k});case 27:d({collectionId:Z,collectionName:f,gridItems:i,assets:r,pageSection:I,listId:A}),s(Z),l(R),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),n({status:b.cM,error:e.t0});case 35:return e.prev=35,e.next=38,(0,y.JG)(_({queryParams:{"filter[type]":k}}));case 38:return e.finish(35);case 39:case"end":return e.stop()}}),e,null,[[2,32,35,39]])})));return function(t){return e.apply(this,arguments)}}(),[d,g,U,D]);return{add:R,collectionId:o,setStatus:n,status:t,verificationCode:u}}(),de=le.add,pe=le.status,fe=le.collectionId,ge=le.verificationCode;(0,i.useEffect)((function(){return function(){return L(null)}}),[]),(0,i.useEffect)((function(){return function(){return Q("")}}),[]);var ve=(0,i.useCallback)((function(e){var t=e.formattedAssets,n=e.gridItems,r=e.isCopyToCollection,i=e.mappedAssetType,s=e.redirectToCollectionDetailsPage,a=e.pageSection,c=e.listId;Q(i),L(t),ee(a),re(c),r&&R(!0),n&&Y(n),s&&ue({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:s}),o(!0)}),[]);return(0,i.useEffect)((function(){(0,a.DZ)({showAddToCollectionModal:ve,isLoggedInUser:oe})}),[oe,ve]),{addToCollectionViewsProps:(0,i.useMemo)((function(){return{assets:G,pageSection:$,assetType:H,collectionId:fe,collectionTitle:J,gridItems:X,isDialogActive:r,isSnackBarOpen:d,onAddToCollections:function(e){var t=e.id,n=e.title,r=e.verificationCode,i=e.groupedOptions,s=e.pageSection;return N(n),o(!1),g(!0),de({assetType:H,assets:G,gridItems:X,groupedOptions:i,id:t,title:n,verificationCode:r,pageSection:s||$,listId:ne})},onAlertSnackbarClose:function(){return g(!1)},redirectToCDPAction:ce,setIsDialogActive:o,showCopyToModalTitle:Z,status:pe,verificationCode:ge}}),[G,X,de,ne,$,H,fe,J,r,d,ce,Z,pe,ge]),addToCollectionViewsHandler:(0,i.useCallback)((function(e){var t=e.assets,n=e.gridItems,r=e.isCopyToCollection,o=void 0!==r&&r,i=e.redirectToCollectionDetailsPage,s=e.pageSection,u=e.listId;if(oe){var l=function(e){return[].concat(e)}(t);ve({formattedAssets:l,gridItems:n,isCopyToCollection:o,mappedAssetType:(0,c.A8)(l[0]),redirectToCollectionDetailsPage:i,pageSection:s,listId:u})}else(0,a.JO)({assets:t,gridItems:n,signUpPath:ie})}),[oe,ve,ie]),AddToCollectionViews:z}}},95051:function(e,t,n){n.d(t,{DZ:function(){return a},JO:function(){return s}});var r=n(52087),o="add_to_collection_asset",i="add_to_collection_grid_items",s=function(e){var t=e.assets,n=e.gridItems,r=e.signUpPath;window&&(t&&window.sessionStorage.setItem(o,JSON.stringify(t)),n&&window.sessionStorage.setItem(i,JSON.stringify(n)),window.location=r)},a=function(e){var t=e.showAddToCollectionModal,n=e.isLoggedInUser;if(void 0!==n){if(n){var s=window.sessionStorage.getItem(o),a=window.sessionStorage.getItem(i),c=function(e){return e&&"undefined"!==e};if(c(s)&&c(a)){var u=JSON.parse(s),l=JSON.parse(a),d=[].concat(u);t({formattedAssets:d,gridItems:l,mappedAssetType:(0,r.A8)(d[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(o),window.sessionStorage.removeItem(i)}}},67974:function(e,t,n){n.d(t,{y:function(){return r}});var r=function(e){return[e.subPage,e.pageType].join("-")}},70802:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(67294),o=n(65014),i=n(87686),s=n(95101),a=function(){var e=(0,i.yh)().analytics,t=(0,s.Y)().getSearchContext;return(0,r.useCallback)((function(n){var r=n.collectionId,i=n.collectionName,s=n.gridItems,a=n.assets,c=n.pageSection,u=n.listId;e.productAddedToWishlist({products:a.map((function(e){return(0,o.bR)({asset:e,getSearchContext:t,gridItems:s,pageSection:c})})),wishlist_id:r,wishlist_name:i,list_id:null!==u&&void 0!==u?u:""})}),[e,t])}},33485:function(e,t,n){n.d(t,{Sl:function(){return x},Ov:function(){return D},cM:function(){return j}});var r,o,i=n(17674),s=n(4730),a=n(59499),c=n(11163),u=n(87883),l=n(11987),d=n.n(l),p="signup",f="login",g=(r={},(0,a.Z)(r,p,"/".concat(p)),(0,a.Z)(r,f,"/".concat(f)),r),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=void 0===t?{}:t,r=d().format({pathname:g.signup,query:n});return[r,r]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=void 0===t?{}:t,r=d().format({pathname:g.login,query:n});return[r,r]},m=n(31955),b=n(11752),h="-undefined",O=(0,b.default)().publicRuntimeConfig.authSsoCookieName,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cookies;return(t?t[O]:m.Z.get(O))===h},P=n(85138),S=n(43452),w=["landing_page"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=(o={},(0,a.Z)(o,u.k4,u.k4),(0,a.Z)(o,u.pX,u.gW),(0,a.Z)(o,u.gP,u.gP),(0,a.Z)(o,u.xF,u.xF),o),k=function(e){var t=e.getPathProps,n=e.query,r=(n=void 0===n?{}:n).landing_page,o=(0,s.Z)(n,w),a=(0,c.useRouter)().asPath,u=(0,P.D)(),l=u.isBrandSstk,d=u.isBrandEnterprise,p=function(e){var t=(0,S.qw)(e);return A[t]}(a),f=r||(d?"/"===a?null:a:null),g=t({query:I(I(I({},l&&{site:p}),f&&{landing_page:f}),o)});return(0,i.Z)(g,1)[0]},j=function(e){return k({getPathProps:v,query:e})},D=function(){return k({getPathProps:y})},x=function(e){var t=e.cookies,n=e.queryParams,r=e.signUpView,o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookies,t=C({cookies:e});return{getPathProps:t?y:v,isSignUp:!t}}({cookies:t}),i=o.getPathProps,s=o.isSignUp;return k({getPathProps:i,query:I(I({},n),s&&r?{view:r}:{})})}},43224:function(e,t,n){n.d(t,{w:function(){return d}});var r=n(50029),o=n(87794),i=n.n(o),s=n(67294),a=n(44828),c=n(81391),u=n(30401),l=n(3674),d=function(){var e=(0,s.useState)({status:"",error:void 0}),t=e[0],n=e[1],o=(0,s.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var r,o,s,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection,o=t.mediaItem,s=(0,a.df)({urlParams:{id:r.id}}).formattedUrl,d={data:{id:r.id,relationships:{"cover-item":{data:{id:"".concat(o.id),type:u.A8}}},type:u.Ul}},e.prev=3,n({status:c.MR,error:void 0}),e.next=7,l.uS.patch(s,d);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n({status:c.cM,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{status:t,setStatus:n,setAsCover:o}}}}]);
//# sourceMappingURL=11940-fb492c30d9c67d94.js.map